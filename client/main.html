
<head>
  <link rel="stylesheet" href="main.css"/>
 <link rel="icon" href="/favicon2.png?v=3">
  <title >DDA -- DRCT</title>
</head>

<body>
<div class="txtNew" style=" width: 100%; position: absolute; top: 15px;"><span style="color:#064573;"><span style="font-family: open sans,sans-serif; font-size:38px;">
  <div class="dropdown">
    <button class="dropbtn">MENU
      <i class="fa fa-caret-down"></i>
    </button>
    <div class="dropdown-content">
      <a href="#">HOME</a>
      <a href="#">TOKEN TRADER</a>
      <a href="#">CONTRACT DETAILS</a>
      <a href="#">HOW TO USE</a>
      <a href="#">WEBSITE</a>
      <a href="#">SUPPORT</a>
    </div>
  </div> 
  <div style="padding-top:15px"><div  style=" margin:0 auto;text-align:center;padding:0px;border-bottom: 2px solid rgba(61, 155, 233, 1); width: 100%; height: 5px;"></div></div>
  </span></span>
<div class="mainpart">
<h2 class="dapp-header" id="Title">One Week BTC/USD -  Standard DRCT Contracts
</h2>
  {{> factory}}

{{> connection}}
 <div id= "bottom_box2" style="text-align:right"><div id="disclaimer_h">
    <h4> + Disclaimer:</h4></div>
    <div id="disclaimer_b" style="display:none;text-align:left">
      <p> --DDA contracts and this DApp are still in a beta stage</p>
      <p> --Use of the Site and participation in transactions may carry financial risk. You acknowledge and agree that you are aware of such risks</p>
      <p> --The site may not be appropriate or available for use in some jurisdictions.</p>
    </div>
  </div>
</div>
<footer style="padding:0px; background-color:rgba(6, 69, 115, 1); text-align:right;">
 <div id="foot"><br>
    <p><a href="https://www.decentralizedderivatives.org" id="foot">www.decentralizedderivatives.org</a></p>
    <p><a href="info@decentralizedderivatives.org" id="foot">info@decentralizedderivatives.org</a></p>
  <br>
</div>
</footer>

</div>

</body>

<template name="connection">
    <div id= "bottom_box2" style="text-align:right"><div id="connection_h">
    <h4> + Connection Status:</h4></div>
    <div id="connection_b" style="display:none;text-align:left">
      <p>Note, these contracts are mainnet...you should be too</p>
      <p>Network: <i> {{net}} </i></p>
      <p>Address: <i> {{acct}} </i></p>
      <p>Funds: <i> {{funds}} </i> <i>Ether</i></p>
    </div>
  </div>
</template>

<template name ="factory">

   <div class="outer">
    <div class="innerwrap">
        <div class="leftdiv">
          <h2>My Positions</h2>
                  {{> mySwaps}}
        </div>

        <div class="rightdiv">
          <h2>BTC/USD Price - 1 month</h2>
          <div class="tv-layout-width">
          <div id="tv-medium-widget-container" class="tv-external-tools__widget-block">
          <div id="tv-medium-widget" class="tv-external-tools__widget-frame-container tv-external-tools__widget-border" style="width: auto; height: auto;"><div id="tradingview_08e29-wrapper" style="position: relative;box-sizing: content-box;width:auto;height:auto;margin: 0 auto !important;padding: 0 !important;font-family:Arial,sans-serif;"><div style="width:auto;height:auto;background: #fff;padding: 0 !important;"><iframe id="tradingview_08e29" src="https://www.tradingview.com/mediumwidgetembed/?symbols=Bitcoin%20%2F%20USD&amp;Bitcoin%20%2F%20USD=COINBASE%3ABTCUSD%7C1m&amp;locale=en&amp;trendLineColor=%234bafe9&amp;underLineColor=%23dbeffb&amp;fontColor=%2383888D&amp;gridLineColor=%23e9e9ea&amp;chartOnly=1&amp;width=1000px&amp;height=800px&amp;utm_source=www.tradingview.com&amp;utm_medium=widget&amp;utm_campaign=symbol-overview" style="margin: 0 !important; padding: 0 !important; width:100%; height: 300px;" frameborder="0" allowtransparency="true" scrolling="no"></iframe></div><div style="position:absolute;display: block;box-sizing: content-box;height: 24px;width: 100%;bottom: 0;left: 0;margin: 0;padding: 0;font-family: Arial,sans-serif;"><div style="display: block;margin: 0 1px 1px 1px;line-height: 7px;box-sizing: content-box;height: 11px;padding: 6px 10px;text-align: right;background: #fff;"><a href="https://www.tradingview.com/?utm_source=www.tradingview.com&amp;utm_medium=widget&amp;utm_campaign=symbol-overview" target="_blank" style="color: #0099d4;text-decoration: none;font-size: 11px;"><span style="color: #b4b4b4;font-size: 11px;">Quotes by</span> TradingView</a></div></div></div></div>
         </div>
        </div>
            <h2> Today's Queried Valued: ... <i>What's this?</i><button>Query Oracle</button></h2>
        </div>
      </div>
      <div class="innerwrap">
      <div class="leftdiv">
        <h2>Open Dates</h2>
      </div>
      <div class="rightdiv">
        <h2> Open Contracts</h2>
      </div>

    </div>
  </div>
</template>

<template name ="bulletin">
<br><br><br><br>
    <h4>Start Date:  <input type="date" id="startDate"></h4>
    <h4> Contract State
      <select id="CState">
      <option value="1">Open</option>
      <option value="0">Created</option>
       <option value="2">Entered</option>
        <option value="3">Tokenized</option>
         <option value="4">Paid</option>
    </select>
  </h4>
    <button class="bulletin" id="button_bottom">List Opens</button>
    <button class="openDates" id="button_bottom">List Open Dates</button>
    <br>
    <p id="openDateList"></p>
    <br>
    <p id="bulletinState">-----</p>
    <br>
          <br>
      <br>
  <div id= "bottom_box"><div class="H2_h"><h2> + How to Use:</h2></div>
   {{#if howto}}<p>--Click List Open Dates, to see a summary of all contracts that are currently open (settled in the future)
    <br>-- To list specific open contract details:
    <br>----Pick a contract start date (one from the open date list)
    <br>----Pick a contract state (Open is one side entered, Created is pre-funds being sent, Entered is two sides, Tokenized means that tokens are created and then Paid is closed (these will be expired contracts))
    <br>--Click 'List Opens'
</p>
{{/if}}
</div>
</template>


<template name ="Oracle">
<br><br><br>
    <p>Enter Date: <input type="date" id="oDate"></p>
    <br>
    <button class="Oracle" id="button_bottom"> Get Value </button><button class="oraclePush" id="button_bottom"> Execute Oracle Call </button><button class="oracleFund" id="button_bottom"> Fund Oracle </button>
     <br>
     <br>
     <br>
    <p>{{existToken}} </p>
    <p>{{oraclevals}} </p>
    <br>
    <br>
    
    <br>
    <div id="TokenCreator" style="visibilty:hidden">
    <button class="newTokens" id="button_bottom"> Create Token </button><button class="isToken" id="button_bottom"> Has Token? </button>
    </div>

          <br>
      <br>
  <div id= "bottom_box"><div class="H2_h"><h2> + How to Use:</h2></div>
   {{#if howto}}<p>--To do a base query of the Oracle, pick a date and click 'Get Value'
    <br>--DDA does query the oracle for any date with a contract, however the contracts are decentralized and you can query the Oracle too with the 'Execute Oracle Call'
    <br>--If the Oracle needs funds to query the API, participants can use the 'Fund Oracle' button
    <br> -- Oracle methodology can be found <a href="https://github.com/DecentralizedDerivatives/Public_Oracle">here</a>
    <br> -- This tab can also be used to create a token. If you are the first party to create a contract for a given date, tokens must be created.    
    <br> -- One can check if there is a token on a given date by choosing a date and clicking 'Has Token?'. 
    <br> -- To create tokens, one can hit the 'Create Token' button
</p>
{{/if}}
</div>

</template>


<template name="cashout">
<br><br><br><br>
    <button class="balances" id="button_bottom">Get Balances</button>
    <br><br>
    <div id='Balances' style = "visibility: hidden">
      <p>Balance Base1 Token:  <i> {{longbalance2}} </i></p>
      <p>Balance Base2 Token:  <i> {{shortbalance2}} </i></p>
    </div>
    <button class="cashout" id="button_bottom">Cash Out</button>
    <br>
          <br>
      <br>
  <div id= "bottom_box"><div class="H2_h"><h2> + How to Use:</h2></div>
  {{#if howto}}<p>--Click 'Get Balances' to see how many wrapped Ether you have to cash out
    <br>-- Once you click 'Cash Out', you will have to withdraw two separate wrapped Ethers (two metamask calls) if positive balances
</p>
{{/if}}
</div>
</template>

<template name="exit">
<br><br><br><br>
<form id="exit" action="/action_page.php"
onsubmit = "return validateForm()" method = "post">
  Contract Address:<input type="text" name="" value=""><br>
</form>
<br>
    <button class="exit" id="button_bottom">  Exit  </button>
    <br>
    <br>
    <br>
  <div id= "bottom_box"><div class="H2_h"><h2> + How to Use:</h2></div>
   {{#if howto}}<p>--Paste in your swap address and click 'Exit'
    <br>-- Only contracts that have not been tokenized can be exited (contract state is 1 or 2)
    <br>--If another party has entered the other side, both of you will need to exit the contract
    <br> --If it was just you, the contract reverts to the initial state, and you can then enter in a new amount / premium if you desire
</p>
{{/if}}
</div>
</template>

<template name="enter">
<br><br><br><br>
<form id="enter" action="/action_page.php"
onsubmit = "return validateForm()" method = "post">
  Contract Address:<input type="text" name="" value=""><br>
</form>
<br>
  <h4> Long or Short:
    <select id="isLong_b">
      <option value="true">Long</option>
      <option value="false">Short</option>
    </select>
  </h4>
      <h4>Amount of Ether: <input type="text" id='amount_b' name="" value=0></h4>

    <button class="enter" id="button_bottom">  Enter Contract  </button>
    <br>
          <br>
      <br>
  <div id= "bottom_box"><div class="H2_h"><h2> + How to Use:</h2></div>
  {{#if howto}} <p>--Paste in the contract address.  If you don't know the contract address, you can go to 'Open Contracts', select the start date and 'Open' contract states.  Then hit 'List Opens' to see all valid options and the details. 
    <br>-- Enter whether YOU are long or short
    <br>--Enter amount of Ether (to make sure party does not cancel and change it on you)
    <br> - Click 'Enter Contract'.
    <br>--Once mined, go check the 'My Positions' and see that you have some tokens
    <br>--After the contract, be sure to go cash out your tokens
    <br>--For a complete tutorial, check out our DApp tutorial video: <a href="https://www.youtube.com/watch?v=NdBqfzAeHFg">here</a>
</p>
{{/if}}
</div>
</template>



<template name ="mySwaps">
<br><br><br><br>
 <h4>Start Date:  <input type="date" id="startDate"></h4>
    <div id='CapValues'>
      <p>Cap Values are +/- 100% of the starting value</p>
      <p>Start Value:  <i>{{startvalue}}</i></p>
      <p>Cap Value (Min):  <i>{{capmin}}</i></p>
      <p>Cap Value (Max):  <i>{{capmax}}</i></p>
    </div>
    <button class="balances" id="button_bottom">Get Open Token Balances</button>
    <br><br>
    <div id='Balances' style = "visibility: visible">
      <p>Balance Long Token:  <i> {{longbalance}} </i></p>
      <p>Balance Short Token:  <i> {{shortbalance}} </i></p>
    <br>
    <form id="exit" action="/action_page.php"
        onsubmit = "return validateForm()" method = "post">
          Reciever Address:<input type="text" id="receiver" name="" value=""><br><br>
          Type: <select id="isLong">
            <option value="true">Long</option>
            <option value="false">Short</option>
          </select>
          / Amount:      <input type="text" id='amount_send' name="" value=0><i>Must be greater than 1</i><br><br>
        </form>
    <button class="sendToken" id="button_bottom">Send Token</button>
  </div>
    <button class="MySwaps" id="button_bottom"> Show My Contracts </button>
    <br><br><p id="openswaplist"> </p>
    <br>
          <br>
      <br>
  <div id= "bottom_box"><div class="H2_h"><h2> + How to Use:</h2></div> {{#if howto}} 
   <p>--To see the amount of long or short token's you have for a given start date (along with the start Oracle value and cap values), click 'Get Open Token Balances'
    <br>-- To send a long or short token, enter the reciever address and the amount and then click 'Send Token'
    <br>--To see all positions from your address, click 'Show My Contracts'
</p>
{{/if}}
</div>
</template>