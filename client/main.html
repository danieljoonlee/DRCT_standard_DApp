
<head>
  <link rel="stylesheet" href="main.css"/>
 <link rel="icon" href="/favicon2.png?v=3">
  <title >DDA -- DRCT</title>
</head>

<body>
<div class="txtNew" style=" width: 100%; position: absolute; top: 50px;">
<h1 style="line-height:1em; text-align:center;">
<img src="/favicon.png" alt="favicon" style="width:200px;height:200px;" align="center">
<br>
<br>
<span style="color:#064573;"><span style="font-family: open sans,sans-serif; font-size:38px;"> DECENTRALIZED DERIVATIVES ASSOCIATION
  <div style="padding:10px">
 
  <div  style=" margin:0 auto;text-align:center;padding:0;border-bottom: 2px solid rgba(61, 155, 233, 1); width: 738px; height: 5px;"></div></div>
  </span></span>

  <div id="inner">
    {{> radioform}}
  </div>


  </h1>

<br>
<br>
<br>
<br>
<div class="mainpart">
<h2 class="dapp-header" id="Title">One Week BTC/USD -  Standard DRCT Contracts
</h2>
  <p id="radioselection"></p>
  {{#if showFactory}}
  {{> factory}}
  {{/if}}
  {{#if showCashout}}
    {{> cashout}}
  {{/if}}
  {{#if showEnter}}
    {{> enter}}
  {{/if}}
  {{#if showBulletin}}
    {{> bulletin}}
  {{/if}}
    {{#if showmySwaps}}
    {{> mySwaps}}
  {{/if}}
    {{#if showExit}}
    {{> exit}}
    {{/if}}
  {{#if showOracle}}
    {{> Oracle}}
  {{/if}}
  <div id= "bottom_box"><div id="cdetails_h"><h2> + Contract Details:</h2></div>
  <div id="cdetails_b" style="display:none">
    <p>
	<ul style="margin-top: 0;">
	<li>1x exposure to underlying rate.</li>
    <li>This contract starts at 00:00:00 GMT on Start Date.</li>
    <li>Contract caps at 100% move (100% of collateral used up).</li>
    <li>Contracts end the following week and can be paid out 24 hours after expiration (this is the time required for Oracle to update).</li> 
    <li>Oracle is a publicly operated Oraclize API pull: Full details <a href="https://github.com/DecentralizedDerivatives/Public_Oracle">here.</a></li>
    <li>There is a nominal contract fee of 0.5%.</li>
    <li>1000 DRCT tokens per ETH.</li>
	</ul>
	</p>
    </div>
  </div>
<div id= "bottom_box">
  <div class = "bottom_box" id = "Protips_h"><h2> +   Pro tips:</h2></div>
    <div id = "Protips_b" style="display:none">
      <p> --Check Open contracts (maybe you can match someone and get paid for it!)
    <br> --Check Open contracts to determine if, and how much, of a premium will assist soliciting a contract.
    <br> --If no one enters your contract or you want to exit before someone does, be sure to click exit and cash out your tokens.
  </p>
</div>
</div>
{{> connection}}
 <div id= "bottom_box2" style="text-align:right"><div id="disclaimer_h">
    <h4> + Disclaimer:</h4></div>
    <div id="disclaimer_b" style="display:none;text-align:left">
      <p> --DDA contracts and this DApp are still in a beta stage.</p>
      <p> --Use of the Site and participation in transactions may carry financial risk. You acknowledge and agree that you are aware of such risks.</p>
      <p> --The site may not be appropriate or available for use in some jurisdictions.</p>
    </div>
  </div>
</div>
<footer style="padding:0px; background-color:rgba(6, 69, 115, 1); text-align:right;">
 <div id="foot"><br>
    <p><a href="https://www.decentralizedderivatives.org" id="foot">www.decentralizedderivatives.org</a></p>
    <p><a href="mailto:info@decentralizedderivatives.org" id="foot">info@decentralizedderivatives.org</a></p>
  <br>
</div>
</footer>

</div>

</body>



<template name="radioform">
<div style="width: 100%">
<button class="radioFactory" id="main">CREATE CONTRACT</button>
<button class="radioEnter" id='main'>ENTER</button>
<button class="radioCashout" id='main'>CASH OUT</button>
<button class="radioExit" id='main'>EXIT</button>
<button class="radioBulletin" id='main'>OPEN CONTRACTS</button>
<button class="radioOracle" id='main'>QUERY ORACLE</button>
<button class="radiomySwaps" id='main' style = "border-right:none" >MY POSITIONS</button>
</div>
</template>


<template name="connection">
    <div id= "bottom_box2" style="text-align:right"><div id="connection_h">
    <h4> + Connection Status:</h4></div>
    <div id="connection_b" style="display:none;text-align:left">
      <p>Note, these contracts are mainnet...you should be too.</p>
      <p>Network: <i> {{net}} </i></p>
      <p>Address: <i> {{acct}} </i></p>
      <p>Funds: <i> {{funds}} </i> <i>Ether</i></p>
    </div>
  </div>
</template>

<template name ="factory">
  <h4>Start Date:  <input type="date" id="startDate"><i>  Must be within the next 20 days</i></h4>
    <h4> Long or Short:
    <select id="isLong">
      <option value="true">Long</option>
      <option value="false">Short</option>
    </select>
  </h4>
      <h4>Amount of Ether: <input type="text" id='amount_a' name="" value=0><i>  Must be greater than or equal to 0.1</i></h4>
      <h4>Premium Amount: <input type="text" id='premium' name="" value=0></h4>
    <div><div id="inner">
      <button class="create" id="button_bottom"> Create Contract </button>
    </div></div>
    <div id = "CreationResult" style="visibility:visible">
      <button class="addresult" id="button_bottom">Address Result</button>
    </div>
      <button class="initiate" name="sendbutton" id="button_bottom" style="visibility:visible;"> Send Funds </button>
          <br><br><br>
          <h4>Contract Address: <input type="text" id="sendfund_add" name="" value={{returnedadd}} style="width:400px"><br></h4>
        <br>
          <i>Note: If you are the first DRCT contract for a given start date, you will need to create long/short DRCT token contracts in the Oracle tab. </i>
      <br>
      <br>
      <br>
  <div id= "bottom_box"><div class="H2_h"><h2> + How to Use:</h2></div>
   {{#if howto}}
   <p>
   <ul style="margin-top: 0;">
   <li>Pick the start date of the contract (end date is 7 days after this).</li>
    <li>Choose long or short the rate.</li>
    <li>Enter amount of Ether you want to put into Contract.</li>
    <li>Enter the Premium in Ether you are willing to pay someone to accept an opposing position (how desperate are you)?</li>
    <li>Click create contract.</li>
    <li>Wait for transaction to be mined (check your MetaMask) and click 'Address Result'.  The address result button gives you the last created address from your MetaMask account.  If you want to manually enter an address, you can do that in the text field.</li>
    <li>Click 'Send Funds' to complete your transation.</li>
    <li>Note that a 'Transaction Error. Exception thrown...' is actually just a warning from MetaMask about gas (no worries, the contract will go through).</li> 
    <li>Check the 'My Positions' page to see your Token Balance when someone enters an opposing position to your contract.</li>
    <li>After the contract is paid out, be sure to go cash out your tokens.</li>
    <li>For a step-by-step guide, check out our: <a href="https://www.youtube.com/watch?v=NdBqfzAeHFg">DRCT DApp tutorial video.</a></li>
    </ul>     
	</p>
  {{/if}}

</div>
</template>

<template name ="bulletin">

    <h4>Start Date:  <input type="date" id="startDate"></h4>
    <h4> Contract State:
      <select id="CState">
      <option value="1">Open</option>
      <option value="0">Created</option>
       <option value="2">Entered</option>
        <option value="3">Tokenized</option>
         <option value="4">Paid</option>
    </select>
  </h4>
    <button class="bulletin" id="button_bottom">List Opens</button>
    <button class="openDates" id="button_bottom">List Open Dates</button>
    <br>
    <p id="openDateList"></p>
    <br>
    <p id="bulletinState">-----</p>
    <br>
          <br>
      <br>
  <div id= "bottom_box"><div class="H2_h"><h2> + How to Use:</h2></div>
   {{#if howto}}<p>--Click List Open Dates, to see a summary of all contracts that are currently open (settled in the future).
    <br>-- To list specific open contract details:
    <br>----Pick a contract start date (one from the open date list).
    <br>----Pick a contract state (Open is one side entered, Created is pre-funds being sent, Entered is two sides, Tokenized means that tokens are created and then Paid is closed (these will be expired contracts)).
    <br>--Click 'List Opens.'
</p>
{{/if}}
</div>
</template>


<template name ="Oracle">

    <p><h4>Enter Date: <input type="date" id="oDate"></h4></p>
    <br>
    <button class="Oracle" id="button_bottom"> Get Value </button><button class="oraclePush" id="button_bottom"> Execute Oracle Call </button><button class="oracleFund" id="button_bottom"> Fund Oracle </button>
     <br>
     <br>
     <br>
    <p>{{existToken}} </p>
    <p>{{oraclevals}} </p>
    <br>
    <br>
    
    <br>
    <div id="TokenCreator" style="visibilty:hidden">
    <button class="newTokens" id="button_bottom"> Create Token </button><button class="isToken" id="button_bottom"> Has Token? </button>
    </div>

          <br>
      <br>
  <div id= "bottom_box"><div class="H2_h"><h2> + How to Use:</h2></div>
   {{#if howto}}<p>--To do a base query of the Oracle, pick a date and click 'Get Value.'
    <br>--DDA does query the oracle for any date with a contract, however the contracts are decentralized and you can query the Oracle too with the 'Execute Oracle Call.'
    <br>--If the Oracle needs funds to query the API, participants can use the 'Fund Oracle' button.
    <br> Visit this link for a brief explanation of: <a href="https://github.com/DecentralizedDerivatives/Public_Oracle">Oracle methodology</a>
    <br> -- This tab can also be used to create a token. If you are the first party to create a contract for a given date, tokens must be created.    
    <br> -- One can check if there is a token on a given date by choosing a date and clicking 'Has Token?' 
    <br> -- To create tokens, one can hit the 'Create Token' button.
</p>
{{/if}}
</div>

</template>


<template name="cashout">

    <button class="balances" id="button_bottom">Get Balances</button>
    <br><br>
    <div id='Balances' style = "visibility: hidden">
      <p><h5>Balance Base 1 Token:</h5>  <i> {{longbalance2}} </i></p>
      <p><h5>Balance Base 2 Token:</h5>  <i> {{shortbalance2}} </i></p>
    </div>
    <button class="cashout" id="button_bottom">Cash Out</button>
    <br>
          <br>
      <br>
  <div id= "bottom_box"><div class="H2_h"><h2> + How to Use:</h2></div>
  {{#if howto}}<p>--Click 'Get Balances' to see how many wrapped Ether you have to cash out.
    <br>-- Once you click 'Cash Out', you will have to withdraw two separate wrapped Ethers (two MetaMask calls) if positive balances.
</p>
{{/if}}
</div>
</template>

<template name="exit">

<form id="exit" action="/action_page.php"
onsubmit = "return validateForm()" method = "post">
  <h4>Contract Address:  <input type="text" name="" value=""></h4><br>
</form>

    <button class="exit" id="button_bottom">  Exit  </button>
    <br>
    <br>
    <br>
  <div id= "bottom_box"><div class="H2_h"><h2> + How to Use:</h2></div>
   {{#if howto}}<p>--Paste in your swap address and click 'Exit'
    <br>-- Only contracts that have not been tokenized can be exited (contract state is 1 or 2).
    <br>--If another party has entered the other side, both of you will need to exit the contract.
    <br> --If it was just you, the contract reverts to the initial state, and you can then enter in a new amount / premium if you desire.
</p>
{{/if}}
</div>
</template>

<template name="enter">

<form id="enter" action="/action_page.php"
onsubmit = "return validateForm()" method = "post">
  <h4>Contract Address:  <input type="text" name="" value=""></h4>
</form>

  <h4> Long or Short:
    <select id="isLong_b">
      <option value="true">Long</option>
      <option value="false">Short</option>
    </select>
  </h4>
      <h4>Amount of Ether: <input type="text" id='amount_b' name="" value=0></h4>

    <button class="enter" id="button_bottom">  Enter Contract  </button>
    <br>
          <br>
      <br>
  <div id= "bottom_box"><div class="H2_h"><h2> + How to Use:</h2></div>
  {{#if howto}} <p>--Paste in the contract address.  If you don't know the contract address, you can go to 'Open Contracts', select the start date and 'Open' contract states.  Then hit 'List Opens' to see all valid options and the details. 
    <br>-- Enter whether your position(s) is Long or Short.
    <br>--Enter your desired amount of Ether (to make sure the other party does not cancel and change it on you).
    <br> - Click 'Enter Contract'.
    <br>--Once mined, go to the 'My Positions' page to see your Token balance.
    <br>--After the contract, be sure to go cash out your tokens
    <br>--For a complete tutorial, check out our DApp tutorial video: <a href="https://www.youtube.com/watch?v=NdBqfzAeHFg">here.</a>
</p>
{{/if}}
</div>
</template>



<template name ="mySwaps">

 <h4>Start Date:  <input type="date" id="startDate"></h4>
    <div id='CapValues'>
      <p>Cap Values are +/- 100% of the starting value.</p>
      <p>Start Value:  <i>{{startvalue}}</i></p>
      <p>Cap Value (Min):  <i>{{capmin}}</i></p>
      <p>Cap Value (Max):  <i>{{capmax}}</i></p>
    </div>
    <button class="balances" id="button_bottom">Get Open Token Balances</button>
    <br><br>
    <div id='Balances' style = "visibility: visible">
      <p>Balance Long Token:  <i> {{longbalance}} </i></p>
      <p>Balance Short Token:  <i> {{shortbalance}} </i></p>
    <br>
    <form id="exit" action="/action_page.php"
        onsubmit = "return validateForm()" method = "post">
          Reciever Address:  <input type="text" id="receiver" name="" value=""><br><br>
          Type: <select id="isLong">
            <option value="true">Long</option>
            <option value="false">Short</option>
          </select>
          / Amount:      <input type="text" id='amount_send' name="" value=0><i>  Must be greater than 1</i><br><br>
        </form>
    <button class="sendToken" id="button_bottom">Send Token</button>
  </div>
    <button class="MySwaps" id="button_bottom"> Show My Contracts </button>
    <br><br><p id="openswaplist"> </p>
    <br>
          <br>
      <br>
  <div id= "bottom_box"><div class="H2_h"><h2> + How to Use:</h2></div> {{#if howto}} 
   <p>--To see the amount of long or short token's you have for a given start date (along with the start Oracle value and cap values), click 'Get Open Token Balances.'
    <br>-- To send a long or short token, enter the reciever address and the amount and then click 'Send Token.'
    <br>--To see all positions from your address, click 'Show My Contracts.'
</p>
{{/if}}
</div>
</template>